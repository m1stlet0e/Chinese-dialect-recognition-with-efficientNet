# 快速开始指南

## 一键安装(推荐)

### macOS/Linux
```bash
cd GUI
chmod +x setup.sh
./setup.sh
```

### 手动安装
```bash
cd GUI
pip install -r requirements.txt
```

## 快速测试

### 1. 检查文件完整性

确保以下文件存在:
- ✓ `model.py` - 模型定义
- ✓ `class_indices.json` - 类别映射
- ✓ `weight/model-29.pth` - 模型权重(已存在)

### 2. 方式一: GUI界面(最简单)

```bash
python 打包方言识别.py
```

然后:
- **录音测试**: 输入时长(如7) → 点击"录音"旁的确定 → 说话 → 查看结果
- **文件测试**: 点击文件选择器 → 选择WAV文件 → 点击确定 → 查看结果

### 3. 方式二: 命令行测试

```bash
python test_predict.py your_audio.wav
```

示例输出:
```
正在处理音频文件: test.wav
使用设备: cpu

==================================================
识别结果: 四川话
置信度: 85.23%
==================================================

所有类别概率:
  四川话: 85.23%
  上海话: 6.12%
  长沙话: 3.45%
  ...
```

## 准备测试音频

### 录制要求
- **格式**: WAV
- **时长**: 5-10秒
- **采样率**: 任意(程序自动处理)
- **声道**: 单声道或双声道均可
- **内容**: 清晰的方言语音

### 使用macOS录音
1. 打开"语音备忘录"应用
2. 录制5-10秒方言音频
3. 导出为WAV格式
4. 使用GUI或命令行测试

### 使用其他工具录音
- **Audacity** (跨平台,免费)
- **ffmpeg** 命令行: `ffmpeg -f avfoundation -i ":0" -t 7 output.wav`
- **QuickTime Player** (macOS)

## 常见问题速查

| 问题 | 解决方案 |
|------|---------|
| 找不到模型文件 | 确保在GUI目录下运行 |
| wxPython安装失败 | macOS: `pip install wxpython`<br>可能需要较长时间 |
| pyaudio安装失败 | macOS: `brew install portaudio && pip install pyaudio` |
| 没有ffmpeg | macOS: `brew install ffmpeg` |
| 麦克风无权限 | macOS: 系统偏好设置 → 安全性与隐私 → 麦克风 |
| CUDA不可用 | 正常,程序会自动使用CPU |

## 性能说明

- **CPU模式**: 单次预测约2-5秒
- **GPU模式**: 单次预测约0.5-1秒
- **内存占用**: 约500MB
- **推荐配置**: 
  - CPU: 双核以上
  - 内存: 4GB以上
  - 存储: 200MB

## 下一步

1. ✓ 安装依赖
2. ✓ 运行GUI或命令行测试
3. ✓ 准备自己的音频文件
4. ✓ 查看识别结果

有问题? 查看完整的 `README.md` 文档!

## 支持的方言列表

1. 长沙话 (changsha)
2. 河北话 (hebei)
3. 合肥话 (hefei)
4. 客家话 (kejia)
5. 南昌话 (nanchang)
6. 宁夏话 (ningxia)
7. 陕西话 (shan3xi)
8. 上海话 (shanghai)
9. 四川话 (sichuan)


